window.whatInput=function(){"use strict";function e(){r(),i(event),g=!0,w=window.setTimeout(function(){g=!1},650)}function t(e){g||i(e)}function n(e){r(),i(e)}function r(){window.clearTimeout(w)}function i(e){var t=s(e),n=b[e.type];if("pointer"===n&&(n=u(e)),m!==n){var r=a(e),i=r.nodeName.toLowerCase(),c="input"===i?r.getAttribute("type"):null;!d.hasAttribute("data-whatinput-formtyping")&&m&&"keyboard"===n&&"tab"!==C[t]&&("textarea"===i||"select"===i||"input"===i&&v.indexOf(c)<0)||x.indexOf(t)>-1||o(n)}"keyboard"===n&&l(t)}function o(e){m=e,d.setAttribute("data-whatinput",m),-1===T.indexOf(m)&&T.push(m)}function s(e){return e.keyCode?e.keyCode:e.which}function a(e){return e.target||e.srcElement}function u(e){return"number"==typeof e.pointerType?k[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}function l(e){-1===h.indexOf(C[e])&&C[e]&&h.push(C[e])}function c(e){var t=s(e),n=h.indexOf(C[t]);-1!==n&&h.splice(n,1)}function f(){d=document.body,window.PointerEvent?(d.addEventListener("pointerdown",t),d.addEventListener("pointermove",t)):window.MSPointerEvent?(d.addEventListener("MSPointerDown",t),d.addEventListener("MSPointerMove",t)):(d.addEventListener("mousedown",t),d.addEventListener("mousemove",t),"ontouchstart"in window&&d.addEventListener("touchstart",e)),d.addEventListener(y,t),d.addEventListener("keydown",n),d.addEventListener("keyup",n),document.addEventListener("keyup",c)}function p(){return y="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var d,h=[],g=!1,m=null,v=["button","checkbox","file","image","radio","reset","submit"],y=p(),x=[16,17,18,91,93],b={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};b[p()]="mouse";var w,T=[],C={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},k={2:"touch",3:"touch",4:"mouse"};return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?f():document.addEventListener("DOMContentLoaded",f)),{ask:function(){return m},keys:function(){return h},types:function(){return T},set:o}}();